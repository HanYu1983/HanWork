//
//  SheepConfig.m
//  testEmpty4
//
//  Created by Rachel on 12/1/9.
//  Copyright (c) 2012å¹´ __MyCompanyName__. All rights reserved.
//

#import "SheepConfig.h"

LevelDes _level_des[] = {
    
    //{"images/Test/sp", 120, 80, 1, "images/Test/sp", "png", 10.0f, 100.0f, 0 },
    
    {"images/Test/A01", 120, 80, 1, "images/Test/A01", "jpg", 4.0f, 6.0f, 0 },
    {"images/Test/A02", 120, 80, 1, "images/Test/A02", "jpg", 6.0f, 9.0f, -1 },
    {"images/Test/A03", 120, 80, 3, "images/Test/A03", "jpg", 10.0f, 15.0f, -1 },
    {"images/Test/A04", 120, 80, 1, "images/Test/A04", "jpg", 9.0f, 14.0f, -1 },
    {"images/Test/A05", 120, 80, 2, "images/Test/A05", "jpg", 22.0f, 31.0f, 1 },
    {"images/Test/A06", 120, 80, 2, "images/Test/A06", "jpg", 16.0f, 20.0f, 3 },
    {"images/Test/A07", 120, 80, 3, "images/Test/A07", "jpg", 17.0f, 34.0f, 4 },
    {"images/Test/A08", 120, 80, 2, "images/Test/A08", "jpg", 21.0f, 30.0f, 2 },
    {"images/Test/A09", 120, 80, 1, "images/Test/A09", "jpg", 21.0f, 42.0f, -1 },
    {"images/Test/A10", 120, 80, 1, "images/Test/A10", "jpg", 21.0f, 30.0f, -1 },
    {"images/Test/A11", 120, 80, 1, "images/Test/A11", "jpg", 18.0f, 27.0f, 6 },
    {"images/Test/A12", 120, 80, 1, "images/Test/A12", "jpg", 12.0f, 28.0f, -1 },
    
    {"images/Test/B01", 120, 80, 4, "images/Test/B01", "jpg", 12.0f, 18.0f, 5 },
    {"images/Test/B02", 120, 80, 3, "images/Test/B02", "jpg", 18.0f, 35.0f, -1 },
    {"images/Test/B03", 120, 80, 2, "images/Test/B03", "jpg", 25.0f, 35.0f, -1 },
    {"images/Test/B04", 120, 80, 1, "images/Test/B04", "jpg", 14.0f, 21.0f, -1 },
    {"images/Test/B05", 120, 80, 2, "images/Test/B05", "jpg", 35.0f, 46.0f, -1 },
    {"images/Test/B06", 120, 80, 2, "images/Test/B06", "jpg", 14.0f, 17.0f, -1 },
    {"images/Test/B07", 120, 80, 1, "images/Test/B07", "jpg", 45.0f, 55.0f, -1 },
    {"images/Test/B08", 120, 80, 1, "images/Test/B08", "jpg", 8.0f, 13.0f, -1 },
    {"images/Test/B09", 120, 80, 1, "images/Test/B09", "jpg", 12.0f, 14.0f, -1 },
    {"images/Test/B10", 120, 80, 1, "images/Test/B10", "jpg", 20.0f, 27.0f, -1 },
    {"images/Test/B11", 120, 80, 3, "images/Test/B11", "jpg", 45.0f, 70.0f, -1 },
    {"images/Test/B12", 120, 80, 1, "images/Test/B12", "jpg", 20.0f, 27.0f, -1 },

    {"images/Test/C01", 120, 80, 2, "images/Test/C01", "jpg", 13.0f, 18.0f, 5 },
    {"images/Test/C02", 120, 80, 2, "images/Test/C02", "jpg", 34.0f, 44.0f, -1 },
    {"images/Test/C03", 120, 80, 1, "images/Test/C03", "jpg", 16.0f, 21.0f, -1 },
    {"images/Test/C04", 120, 80, 1, "images/Test/C04", "jpg", 25.0f, 29.0f, -1 },
    {"images/Test/C05", 120, 80, 1, "images/Test/C05", "jpg", 40.0f, 54.0f, -1 },
    {"images/Test/C06", 120, 80, 1, "images/Test/C06", "jpg", 27.0f, 31.0f, -1 },
    {"images/Test/C07", 120, 80, 1, "images/Test/C07", "jpg", 47.0f, 54.0f, -1 },
    {"images/Test/C08", 120, 80, 2, "images/Test/C08", "jpg", 34.0f, 44.0f, -1 },
    {"images/Test/C09", 120, 80, 1, "images/Test/C09", "jpg", 42.0f, 52.0f, -1 },
    {"images/Test/C10", 120, 80, 1, "images/Test/C10", "jpg", 26.0f, 30.0f, -1 },
    {"images/Test/C11", 120, 80, 1, "images/Test/C11", "jpg", 63.0f, 83.0f, -1 },
    {"images/Test/C12", 120, 80, 1, "images/Test/C12", "jpg", 55.0f, 80.0f, -1 },
    
    
    {"images/Test/B01", 120, 80, 4, "images/Test/B01", "png", 10.0f, 100.0f, 5 },
    {"images/Test/B02", 120, 80, 3, "images/Test/B02", "png", 10.0f, 100.0f, -1 },
    {"images/Test/B03", 120, 80, 2, "images/Test/B03", "png", 10.0f, 100.0f, -1 },
    {"images/Test/B04", 120, 80, 1, "images/Test/B04", "png", 10.0f, 100.0f, -1 },
    {"images/Test/B05", 120, 80, 2, "images/Test/B05", "png", 10.0f, 100.0f, -1 },
    {"images/Test/B06", 120, 80, 2, "images/Test/B06", "png", 10.0f, 100.0f, -1 },
    {"images/Test/B07", 120, 80, 1, "images/Test/B07", "png", 10.0f, 100.0f, -1 },
    {"images/Test/B08", 120, 80, 1, "images/Test/B08", "png", 10.0f, 100.0f, -1 },
    {"images/Test/B09", 120, 80, 1, "images/Test/B09", "png", 10.0f, 100.0f, -1 },
    {"images/Test/B10", 120, 80, 1, "images/Test/B10", "png", 10.0f, 100.0f, -1 },
    {"images/Test/B11", 120, 80, 3, "images/Test/B11", "png", 10.0f, 100.0f, -1 },
    {"images/Test/B12", 120, 80, 1, "images/Test/B12", "png", 10.0f, 100.0f, -1 },
     
};

Config config;

@implementation SheepConfig

+(Config*) single
{
    return &config;
}

+(int) computStarCountWithLevel:(int) level
                        usetime:(float) usetime
                            min:(int) minv
                            max:(int) maxv;
{
    if( usetime <= 0 )
        return 0;
    LevelDes *des = [self single]->level_des;
    float 
        mint = des[level].mintime,
        maxt = des[level].maxtime,
        allt = maxt- mint;
    if( usetime < mint )
        return maxv;
    else if( usetime >= maxt )
        return minv;
    else
    {
        int d = (maxv- minv)-1;
        int v = (usetime- mint)*d/ allt;
        return minv+(d-v);
    }
}

+(void) configurate
{
    config.level_des = _level_des;
    config.stopMap = [[NSSet alloc] initWithObjects:
               [NSNumber numberWithUnsignedInt:COLOR_ID_STOP_REGION], 
               [NSNumber numberWithUnsignedInt:COLOR_ID_GATE_REGION],
               nil];
    config.colorIdMapGroupId = [[NSDictionary alloc] initWithObjectsAndKeys:
                         [NSNumber numberWithChar:GROUP_RED],
                         [NSNumber numberWithUnsignedInt:COLOR_ID_RED],
                                
                         [NSNumber numberWithChar:GROUP_BLUE],
                         [NSNumber numberWithUnsignedInt:COLOR_ID_BLUE],
                                
                         [NSNumber numberWithChar:GROUP_RED],
                         [NSNumber numberWithUnsignedInt:COLOR_ID_RED_ANTELOPE],
                                
                         [NSNumber numberWithChar:GROUP_BLUE],
                         [NSNumber numberWithUnsignedInt:COLOR_ID_BLUE_ANTELOPE],
                        
                         [NSNumber numberWithChar:GROUP_BOX],
                         [NSNumber numberWithUnsignedInt:COLOR_ID_BOX],
                                
                         [NSNumber numberWithChar:GROUP_DOG],
                         [NSNumber numberWithUnsignedInt:COLOR_ID_UNLOCK_DOG],
                                
                         [NSNumber numberWithChar:GROUP_HIPPO],
                         [NSNumber numberWithUnsignedInt:COLOR_ID_HIPPO],
                                
                         [NSNumber numberWithChar:GROUP_PIG],
                         [NSNumber numberWithUnsignedInt:COLOR_ID_PIG],
                         nil];
    config.zoomFactorX = DATAMAP_SIZE_W/ (float)STAGE_W;
    config.zoomFactorY = DATAMAP_SIZE_H/ (float)STAGE_H;
    return;
}

+(void) configurateRelease
{
    [config.stopMap release];
    [config.colorIdMapGroupId release];
}

@end