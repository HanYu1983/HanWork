window.__require=function t(e,o,n){function i(a,c){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var u="function"==typeof __require&&__require;if(!c&&u)return u(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return i(e[a][1][t]||t)},p,p.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AccuracyInfo:[function(t,e,o){"use strict";cc._RF.push(e,"d6776kcfhlCprjbCWpIqksz","AccuracyInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txtAccuracy=null,e}return __extends(e,t),e.prototype.setAccuracy=function(t){this.txtAccuracy.string=t.toFixed(0)+"%"},__decorate([r(cc.Label)],e.prototype,"txtAccuracy",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],AnimationEndCallback:[function(t,e,o){"use strict";cc._RF.push(e,"0ae9fm3biZLha0sH42TE7+m","AnimationEndCallback"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return __extends(e,t),o=e,e.prototype.end=function(){this.node.emit(o.ON_ANIMATION_END)},e.ON_ANIMATION_END="ON_ANIMATION_END",e=o=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],AnimationLoop:[function(t,e,o){"use strict";cc._RF.push(e,"ad2a9BBvshIYa3lZcWlF5ay","AnimationLoop"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,n.requireComponent),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.start=function(){this.node.getComponent(cc.Animation).play().wrapMode=cc.WrapMode.Loop},e=__decorate([i,r(cc.Animation)],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],AudioController:[function(t,e,o){"use strict";cc._RF.push(e,"f7010MNMAFM9ZvmM4g96XD2","AudioController"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.musicEnable=!1,e.audioEnable=!1,e.musics=[],e.audios=[],e}return __extends(e,t),e.prototype.gamePage=function(){this._playMusic(0)},e.prototype.explode=function(){this._playAudio(0)},e.prototype._playMusic=function(t,e){void 0===e&&(e=!0),this.musicEnable&&cc.audioEngine.play(this.musics[t],e,1)},e.prototype._playAudio=function(t){this.audioEnable&&cc.audioEngine.play(this.audios[t],!1,1)},__decorate([r(cc.Boolean)],e.prototype,"musicEnable",void 0),__decorate([r(cc.Boolean)],e.prototype,"audioEnable",void 0),__decorate([r(cc.AudioClip)],e.prototype,"musics",void 0),__decorate([r(cc.AudioClip)],e.prototype,"audios",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],BasicViewer:[function(t,e,o){"use strict";cc._RF.push(e,"0e745AHooxFgIUqsmnoCXOy","BasicViewer"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._inited=!1,e._isOpen=!1,e}return __extends(e,t),e.prototype.isOpen=function(){return this._isOpen},e.prototype.init=function(){this._inited=!0},e.prototype.addListener=function(){this.removeListenser()},e.prototype.removeListenser=function(){},e.prototype.open=function(){this.node.active=!0,this._inited||this.init(),this.addListener(),this._isOpen=!0},e.prototype.close=function(){this.node.active=!1,this.removeListenser(),this._isOpen=!1},e.prototype.onPrevClick=function(t){throw new Error("Method not implemented.")},e.prototype.onNextClick=function(t){throw new Error("Method not implemented.")},e.prototype.onLeftClick=function(t){throw new Error("Method not implemented.")},e.prototype.onRightClick=function(t){throw new Error("Method not implemented.")},e.prototype.onEnterClick=function(t){throw new Error("Method not implemented.")},e.prototype.onEscClick=function(t){throw new Error("Method not implemented.")},e=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],CommentUI:[function(t,e,o){"use strict";cc._RF.push(e,"df011Ank2FDaJ7z2Gk9gjMk","CommentUI"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./AnimationEndCallback"),i=t("./PopPanel"),r=cc._decorator,a=r.ccclass,c=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.alert=null,e.alertContent=null,e.popPanel=null,e}return __extends(e,t),e.prototype.showAlert=function(t,e){var o=this;this.alert.active=!1,this.alert.active=!0,this.alertContent.string=t,this.alert.getComponent(cc.Animation).play(),this.alert.off(n.default.ON_ANIMATION_END),this.alert.on(n.default.ON_ANIMATION_END,function(){o.alert.active=!1,o.alert.off(n.default.ON_ANIMATION_END),e&&e()})},e.prototype.openPopup=function(t){this.popPanel.open(),this.popPanel.setContent(t)},e.prototype.closePop=function(){this.popPanel.close()},__decorate([c(cc.Node)],e.prototype,"alert",void 0),__decorate([c(cc.Label)],e.prototype,"alertContent",void 0),__decorate([c(i.default)],e.prototype,"popPanel",void 0),e=__decorate([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./AnimationEndCallback":"AnimationEndCallback","./PopPanel":"PopPanel"}],DefaultState:[function(t,e,o){"use strict";cc._RF.push(e,"3973b6q3y1G4JRbC2UpN4vT","DefaultState"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(){function t(){}return t.prototype.onPrevClick=function(t){throw new Error("Method not implemented.")},t.prototype.onNextClick=function(t){throw new Error("Method not implemented.")},t.prototype.onLeftClick=function(t){throw new Error("Method not implemented.")},t.prototype.onRightClick=function(t){throw new Error("Method not implemented.")},t.prototype.onEnterClick=function(t){throw new Error("Method not implemented.")},t.prototype.onEscClick=function(t){throw new Error("Method not implemented.")},t=__decorate([i],t)}());o.default=r,cc._RF.pop()},{}],EffectLayer:[function(t,e,o){"use strict";cc._RF.push(e,"08023xlg+1BLbODmV/AB2ay","EffectLayer"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Pool"),i=t("../ViewController"),r=t("../AnimationEndCallback"),a=cc._decorator,c=a.ccclass,s=(a.property,a.requireComponent),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._pool=null,e}return __extends(e,t),e.prototype.onLoad=function(){this._pool=this.node.getComponent(n.default)},e.prototype.createEffect=function(t,e){var o=this;void 0===e&&(e=!0);var n=this._pool.acquire(),a=e?i.default.instance.view.getGridPos(t):t;return n.x=a[0],n.y=a[1],n.setParent(this.node),n.active=!1,n.active=!0,n.getComponent(cc.Animation).play(),n.off(r.default.ON_ANIMATION_END),n.on(r.default.ON_ANIMATION_END,function(){n.off(r.default.ON_ANIMATION_END),n.removeFromParent(),o._pool.release(n)}),n},e=__decorate([c,s(n.default)],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../AnimationEndCallback":"AnimationEndCallback","../Pool":"Pool","../ViewController":"ViewController"}],Effects:[function(t,e,o){"use strict";cc._RF.push(e,"e2353ZMYJJN/6c4PFVw6Rll","Effects"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./EffectLayer"),i=t("../ViewController"),r=t("./TextEffect"),a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bladeLayer=null,e.shieldLayer=null,e.explodeLayer=null,e.hitHpLayer=null,e.aimEffects=null,e.tracker=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.tracker.toGridPos=[0,0],this.tracker.time=0,this.tracker.speed=.2},e.prototype.createBlade=function(t,e){this._createBlade(e),this._createHitHp(t,e)},e.prototype.createExplode=function(t,e){this._createExplode(e),this._createHitHp(t,e)},e.prototype.createUnitExplode=function(t){this._createExplode(t)},e.prototype.createShield=function(t){this.shieldLayer.createEffect(t).getComponent(r.default).setContent("\u76fe\u9632")},e.prototype.createAimEffect=function(t,e,o){void 0===o&&(o=.2);var n=i.default.instance.view.getGridPos(t);this.tracker.x=n[0],this.tracker.y=n[1],this.tracker.toGridPos=i.default.instance.view.getGridPos(e),this.tracker.time=0,this.tracker.speed=o},e.prototype.createExplodePipe=function(t,e,o){var n=this;cc.tween(this.node).call(function(){n.createAimEffect(t,e)}).delay(1).call(function(){n.createExplode(o,e)}).start()},e.prototype.createBladePipe=function(t,e,o){var n=this;cc.tween(this.node).call(function(){n.createAimEffect(t,e)}).delay(1).call(function(){n.createBlade(o,e)}).start()},e.prototype._createBlade=function(t){this.bladeLayer.createEffect(t)},e.prototype._createExplode=function(t){this.explodeLayer.createEffect(t)},e.prototype._createHitHp=function(t,e){this.hitHpLayer.createEffect(e).getChildByName("Hp").getComponent(cc.Label).string=t.toString()},e.prototype._checkAndMoveAim=function(){(Math.abs(this.tracker.toGridPos[0]-this.tracker.x)>1||Math.abs(this.tracker.toGridPos[1]-this.tracker.y)>1)&&(this.tracker.x+=(this.tracker.toGridPos[0]-this.tracker.x)*this.tracker.speed,this.tracker.y+=(this.tracker.toGridPos[1]-this.tracker.y)*this.tracker.speed,this.tracker.time%1==0&&this.aimEffects.createEffect([this.tracker.x,this.tracker.y],!1)),this.tracker.time+=1},e.prototype.update=function(){this._checkAndMoveAim()},__decorate([s(n.default)],e.prototype,"bladeLayer",void 0),__decorate([s(n.default)],e.prototype,"shieldLayer",void 0),__decorate([s(n.default)],e.prototype,"explodeLayer",void 0),__decorate([s(n.default)],e.prototype,"hitHpLayer",void 0),__decorate([s(n.default)],e.prototype,"aimEffects",void 0),__decorate([s(cc.Node)],e.prototype,"tracker",void 0),e=__decorate([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../ViewController":"ViewController","./EffectLayer":"EffectLayer","./TextEffect":"TextEffect"}],FightInfo:[function(t,e,o){"use strict";cc._RF.push(e,"fb325MOzs1BO5LBth58IAn1","FightInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.weaponName=null,e.power=null,e.hit=null,e}return __extends(e,t),e.prototype.setHitRate=function(t){this.hit.string=0===t?"--":(100*t).toFixed(0)+"%"},e.prototype.setPower=function(t){this.power.string=t.toString()},e.prototype.setWeaponName=function(t){this.weaponName.string=t},e.prototype.showHit=function(t){this.hit.node.active=t},e.prototype.showPower=function(t){this.power.node.active=t},__decorate([r(cc.Label)],e.prototype,"weaponName",void 0),__decorate([r(cc.Label)],e.prototype,"power",void 0),__decorate([r(cc.Label)],e.prototype,"hit",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],FightMenu:[function(t,e,o){"use strict";cc._RF.push(e,"dd4a90gXf1IGIj+KSg1L4HN","FightMenu"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./FightInfo"),i=t("../ViewController"),r=cc._decorator,a=r.ccclass,c=r.property,s=(r.requireComponent,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.back=null,e.playerInfo=null,e.enemyInfo=null,e}return __extends(e,t),e.prototype.showInfos=function(t){this.clearInfo(),this.showInfo(this.playerInfo,t[0]),this.showInfo(this.enemyInfo,t[1])},e.prototype.showInfo=function(t,e){switch(this.back.node.active=!0,t.node.active=!0,e.action[0]){case"evade":t.setWeaponName("\u8ff4\u907f"),t.showPower(!1),t.setHitRate(0);break;case"guard":t.setWeaponName("\u9632\u5fa1"),t.showPower(!1),t.setHitRate(0);break;case"attack":var o=i.default.instance.getWeapon(e.action[1].weaponKey);t.showPower(!0),t.showHit(!0),t.setHitRate(e.hitRate),t.setWeaponName(o.title),t.setPower(o.damage)}},e.prototype.clearInfo=function(){this.back.node.active=!1,this.playerInfo.node.active=!1,this.enemyInfo.node.active=!1},__decorate([c(cc.Sprite)],e.prototype,"back",void 0),__decorate([c(n.default)],e.prototype,"playerInfo",void 0),__decorate([c(n.default)],e.prototype,"enemyInfo",void 0),e=__decorate([a],e)}(cc.Component));o.default=s,cc._RF.pop()},{"../ViewController":"ViewController","./FightInfo":"FightInfo"}],GamePage:[function(t,e,o){"use strict";cc._RF.push(e,"d3ef9A+nWtFN74uy2wG4aYV","GamePage"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../GamePage/LandMap"),i=t("../GamePage/LandUnits"),r=t("../GamePage/WeaponMenu"),a=t("../GamePage/UnitStatuMenu"),c=t("../GamePage/FightMenu"),s=t("../GamePage/TurnStart"),u=t("../GamePage/Effects"),p=t("../GamePage/AccuracyInfo"),l=t("../ShowItem"),d=t("../BasicViewer"),f=t("../InputSensor"),h=t("../MenuButtons"),y=t("../ViewController"),_=t("../GamePage/UnitSampleInfo"),m=t("../GamePage/TextEffect"),g=t("../GamePage/SmallMap"),C=t("../GamePage/RobotSelect/RobotSelectPanel"),v=cc._decorator,S=v.ccclass,b=v.property,P=v.requireComponent,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.map=null,e.units=null,e.unitMenu=null,e.sceneMenu=null,e.weaponMenu=null,e.unitStatuMenu=null,e.fightInfoMenu=null,e.effects=null,e.accuracyInfos=null,e.unitSampleInfos=null,e.unitActionInfos=null,e.turnStart=null,e.cursor=null,e.smallMap=null,e.robotSelectPanel=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.map.initPool()},e.prototype.init=function(){this.unitMenu.updateItem=function(t,e){t.setLabel(e)},this.sceneMenu.updateItem=function(t,e){t.setLabel(e)}},e.prototype.open=function(){t.prototype.open.call(this),this.map.resetUV(),y.default.instance.notifyStartGame(),y.default.instance.audioController.gamePage()},e.prototype.setCursor=function(t){this.cursor.active=!0;var e=y.default.instance.view.getGridPos(t);this.cursor.x=e[0],this.cursor.y=e[1]},e.prototype.hideCursor=function(){this.cursor.active=!1},e.prototype.openRobotSelectPanel=function(t){this.robotSelectPanel.open(),this.robotSelectPanel.setRobotList(t)},e.prototype.closeRobotSelectPanel=function(){this.robotSelectPanel.close()},e.prototype.showFightInfo=function(t){this.fightInfoMenu.showInfos(t.preview)},e.prototype.closeFightInfo=function(){this.fightInfoMenu.clearInfo()},e.prototype.setSmallMap=function(t){this.smallMap.drawMap(t)},e.prototype.openUnitStatuMenu=function(t){this.unitStatuMenu.open(),this.unitStatuMenu.setUnit(t.unit),this.unitStatuMenu.setTerrain(t.terrain)},e.prototype.closeUnitStatuMenu=function(){this.unitStatuMenu.close()},e.prototype.showAccuracyInfos=function(t){this.closeAccuracyInfos();var e=[],o=[];t.forEach(function(t){e.push(t.targetUnit.position),o.push(t.hitRate)});var n=0;this.accuracyInfos.showItems(e,function(t){t.getComponent(p.default).setAccuracy(100*o[n++])})},e.prototype.closeAccuracyInfos=function(){this.accuracyInfos.clearItem()},e.prototype.showUnitSampleInfos=function(t){this.closeUnitSampleInfos();var e=[],o=[],n=[],i=[],r=[];t.forEach(function(t){e.push(t.position),o.push(t.robotState.maxHp),n.push(t.robotState.maxEn),i.push(t.robotState.hp),r.push(t.robotState.en)});var a=0;this.unitSampleInfos.showItems(e,function(t){t.getComponent(_.default).showHPEN(o[a],i[a],n[a],r[a]),a+=1})},e.prototype.closeUnitSampleInfos=function(){this.unitSampleInfos.clearItem()},e.prototype.explodeUnit=function(t,e){this.effects.createUnitExplode(t.unit.position),this.units.removeUnitByID(t.unit.key),cc.tween(this.node).delay(1).call(e).start()},e.prototype._showAttackerAim=function(t,e,o,n,i){var r=this;return cc.tween(this.node).call(function(){r.unitSampleInfos.showItems([t],function(t){t.getComponent(_.default).showHPEN(o.robotState.maxHp,o.robotState.hp,o.robotState.maxEn,o.robotState.en),t.getComponent(_.default).changeEN(o.robotState.maxEn,n.robotState.en)})}).delay(.7)},e.prototype._showDeffenderChangeHP=function(t,e,o){var n=this;return cc.tween(this.node).call(function(){n.unitSampleInfos.showItems([t],function(t){t.getComponent(_.default).showHPEN(e.robotState.maxHp,e.robotState.hp,e.robotState.maxEn,e.robotState.en),t.getComponent(_.default).changeHP(e.robotState.maxHp,o.robotState.hp)})}).delay(.7)},e.prototype._showAttackerChangeHP=function(t,e,o){var n=this;return cc.tween(this.node).call(function(){n.unitSampleInfos.showItems([t],function(t){t.getComponent(_.default).showHPEN(e.robotState.maxHp,e.robotState.hp,e.robotState.maxEn,o.robotState.en),t.getComponent(_.default).changeHP(o.robotState.maxHp,o.robotState.hp)})}).delay(.7)},e.prototype._showHitEffect=function(t,e,o){var n,i=this,r=[],a=!1;o.events&&o.events.forEach(function(e){switch(e){case"guard":var o=cc.tween(i.node).call(function(){i.effects.createShield(t.position)}).delay(.7);r.push(o);break;case"evade":a=!0}});var c=cc.tween(this.node).call(function(){a?i.units.evadeOneUnit(t.key):(i.effects.createExplode(o.damage,e),i.units.shakeOneUnit(t.key),y.default.instance.audioController.explode())}).delay(.6);return r.push(c),(n=cc.tween(this.node)).sequence.apply(n,[cc.tween(this.node).delay(0)].concat(r))},e.prototype._showDeffenderAim=function(t,e,o,n){var i=this;return cc.tween(this.node).call(function(){i.unitSampleInfos.showItems([n],function(o){o.getComponent(_.default).showHPEN(t.robotState.maxHp,e.robotState.hp,t.robotState.maxEn,t.robotState.en),o.getComponent(_.default).changeEN(t.robotState.maxEn,e.robotState.en)})}).delay(.7)},e.prototype.showAimAnimation=function(t,e){var o=this;this.closeUnitSampleInfos(),this.hideCursor();var n=t.units[0],i=t.units[1],r=n.position,a=i.position;cc.tween(this.node).delay(1).call(function(){o.effects.createAimEffect(r,a,.1)}).delay(1).call(e).start()},e.prototype.changeUnitHP=function(t,e){var o;this.closeUnitSampleInfos(),this.hideCursor();var n=t.units[0],i=t.units[1],r=t.unitsAfter[0],a=t.unitsAfter[1],c=n.position,s=i.position,u=t.results[1],p=t.results[0],l=[];l.push(this._showAttackerAim(c,s,n,r,i)),l.push(this._showHitEffect(i,s,u)),l.push(this._showDeffenderChangeHP(s,i,a)),0!=p.events.length&&(l.push(this._showDeffenderAim(i,a,c,s)),l.push(this._showHitEffect(n,c,p)),l.push(this._showAttackerChangeHP(c,n,r))),(o=cc.tween(this.node)).sequence.apply(o,[cc.tween(this.node).delay(0)].concat(l)).call(e).start()},e.prototype.openTurnStart=function(t,e){var o=this;this.turnStart.setContent(t?"\u73a9\u5bb6\u56de\u5408\u958b\u59cb":"\u6575\u8ecd\u56de\u5408\u958b\u59cb"),this.turnStart.setPlayer(t),this.turnStart.open(),this.turnStart.node.on("end",function(){o.turnStart.node.off("end"),e()},this)},e.prototype.openSceneMenu=function(t,e){this.closeSceneMenu(),this.sceneMenu.open(),this.sceneMenu.setData(t,e)},e.prototype.closeSceneMenu=function(){this.sceneMenu.close()},e.prototype.openUnitMenu=function(t,e,o,n){var i=this,r=e[0],a=e[1];if(this.closeUnitMenu(),this.unitMenu.open(),this.unitMenu.setData(r,o),this.unitActionInfos.showItems([t],function(t){var e=i.unitMenu.getFocus();t.getComponent(m.default).setContent(e)}),a){var c=a.weaponIdx,s=a.weapons;if(o){var u=o[0],p=o[1][o[0]];u==c&&(this.openWeaponMenu(s),this.weaponMenu.showCurrentWeapon(p))}}},e.prototype.closeUnitMenu=function(){this.unitActionInfos.clearItem(),this.unitMenu.close(),this.weaponMenu.close()},e.prototype.openWeaponMenu=function(t){var e=[];for(var o in t){var n=t[o];e.push(n)}this.weaponMenu.open(),this.weaponMenu.setWeapons(e)},e.generateMap=function(t,e,o,n,i,r,a,c,s,u,p,l){void 0===o&&(o=1),void 0===n&&(n=1),void 0===i&&(i=1),void 0===r&&(r=1),void 0===a&&(a=1),void 0===c&&(c=.3),void 0===s&&(s=.3),void 0===u&&(u=.01),void 0===p&&(p=1),void 0===l&&(l=0);var d=o+n+i+r+a,f=o/d,h=n/d+f,y=i/d+h,_=r/d+y;noise.seed(Math.random());for(var m=[],g=0;g<t;++g)for(var C=0;C<e;++C){var v=noise.perlin2(.1*g,.1*C);if(v=((v=Math.pow(v,p))+1)/2,(v+=l)>_)m.push(5);else if(v>y){var S=.1*Math.floor(.4*g)*3+123,b=.1*Math.floor(.4*C)*3+245,P=noise.perlin2(S,b);if((P=(P+1)/2)>c){var w=.1*g*3+300,R=.1*C*3+20,M=noise.perlin2(w,R);(M=(M+1)/2)>s?m.push(Math.random()<u?7:3):m.push(Math.random()<u?7:6)}else 4==g||8==g||12==g||16==g||4==C||8==C||12==C||16==C?m.push(8):m.push(Math.random()<u?7:4)}else v>h?m.push(Math.random()<u?7:2):v>f?m.push(Math.random()<u?7:1):m.push(0)}return m},__decorate([b(n.default)],e.prototype,"map",void 0),__decorate([b(i.default)],e.prototype,"units",void 0),__decorate([b(h.default)],e.prototype,"unitMenu",void 0),__decorate([b(h.default)],e.prototype,"sceneMenu",void 0),__decorate([b(r.default)],e.prototype,"weaponMenu",void 0),__decorate([b(a.default)],e.prototype,"unitStatuMenu",void 0),__decorate([b(c.default)],e.prototype,"fightInfoMenu",void 0),__decorate([b(u.default)],e.prototype,"effects",void 0),__decorate([b(l.default)],e.prototype,"accuracyInfos",void 0),__decorate([b(l.default)],e.prototype,"unitSampleInfos",void 0),__decorate([b(l.default)],e.prototype,"unitActionInfos",void 0),__decorate([b(s.default)],e.prototype,"turnStart",void 0),__decorate([b(cc.Node)],e.prototype,"cursor",void 0),__decorate([b(g.default)],e.prototype,"smallMap",void 0),__decorate([b(C.default)],e.prototype,"robotSelectPanel",void 0),e=__decorate([S,P(f.default)],e)}(d.default);o.default=w,cc._RF.pop()},{"../BasicViewer":"BasicViewer","../GamePage/AccuracyInfo":"AccuracyInfo","../GamePage/Effects":"Effects","../GamePage/FightMenu":"FightMenu","../GamePage/LandMap":"LandMap","../GamePage/LandUnits":"LandUnits","../GamePage/RobotSelect/RobotSelectPanel":"RobotSelectPanel","../GamePage/SmallMap":"SmallMap","../GamePage/TextEffect":"TextEffect","../GamePage/TurnStart":"TurnStart","../GamePage/UnitSampleInfo":"UnitSampleInfo","../GamePage/UnitStatuMenu":"UnitStatuMenu","../GamePage/WeaponMenu":"WeaponMenu","../InputSensor":"InputSensor","../MenuButtons":"MenuButtons","../ShowItem":"ShowItem","../ViewController":"ViewController"}],Grid:[function(t,e,o){"use strict";cc._RF.push(e,"a2c38aH/INGlLDVDrM7UcAk","Grid"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./UVReset"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveRange=null,e.weaponRange=null,e.mapRange=null,e.landImages=[],e.boxImage=null,e}return __extends(e,t),e.prototype.showNormal=function(){this.showMoveRange(!1),this.showWeaponRange(!1),this.showMapRange(!1)},e.prototype.showMoveRange=function(t){void 0===t&&(t=!0),this.moveRange.active=t},e.prototype.showWeaponRange=function(t){void 0===t&&(t=!0),this.weaponRange.active=t},e.prototype.showMapRange=function(t){void 0===t&&(t=!0),this.mapRange.active=t},e.prototype.showBox=function(t){void 0===t&&(t=!0),this.boxImage.node.active=t},e.prototype.showTargetLand=function(t){for(var e=0;e<this.landImages.length;++e)this.landImages[e].node.active=e==t;this.showBox(!1)},e.prototype.resetUV=function(){for(var t=0;t<this.landImages.length;++t){var e=this.landImages[t].node.getComponent(n.default);e&&e.fix()}},e.prototype.setType=function(t){switch(t){case 0:this.showTargetLand(0);break;case 1:this.showTargetLand(1);break;case 2:this.showTargetLand(2);break;case 3:this.showTargetLand(3);break;case 4:this.showTargetLand(4);break;case 5:this.showTargetLand(5);break;case 6:this.showTargetLand(6);break;case 7:this.showTargetLand(8);break;case 8:this.showTargetLand(7)}},__decorate([a(cc.Node)],e.prototype,"moveRange",void 0),__decorate([a(cc.Node)],e.prototype,"weaponRange",void 0),__decorate([a(cc.Node)],e.prototype,"mapRange",void 0),__decorate([a(cc.Sprite)],e.prototype,"landImages",void 0),__decorate([a(cc.Sprite)],e.prototype,"boxImage",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./UVReset":"UVReset"}],IState:[function(t,e,o){"use strict";cc._RF.push(e,"1486bZtYC5Iq568JQ+tenSt","IState"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],ImagesAssets:[function(t,e,o){"use strict";cc._RF.push(e,"1b1efgnoFxPlJea8w/qiMhn","ImagesAssets"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.images=[],e.landImages=[],e}return __extends(e,t),e.prototype.getImageByKey=function(t){for(var e=this.images.concat(this.landImages),o=0;o<e.length;++o){var n=e[o];if(n.name.toLowerCase()==t.toLowerCase())return n}},e.prototype.getLandImageByType=function(t){switch(t){case 0:return this.getImageByKey("sea");case 1:return this.getImageByKey("beach");case 2:return this.getImageByKey("sand");case 3:return this.getImageByKey("grass");case 4:return this.getImageByKey("city");case 5:return this.getImageByKey("hill");case 6:return this.getImageByKey("energy");default:throw Error("\u9084\u6c92\u6709\u5716\u7247\u54e6:"+t)}},__decorate([r(cc.SpriteFrame)],e.prototype,"images",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"landImages",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],InputSensor:[function(t,e,o){"use strict";cc._RF.push(e,"4a3d393dPBIZ7xtdq7zCnDO","InputSensor"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return __extends(e,t),o=e,e.prototype.start=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN)},e.prototype.onKeyUp=function(t){switch(window.viewNotifyOb.next(["KEY_DOWN",t.keyCode]),t.keyCode){case cc.macro.KEY.w:this.node.emit(o.CURSOR_UP);break;case cc.macro.KEY.a:this.node.emit(o.CURSOR_LEFT);break;case cc.macro.KEY.s:this.node.emit(o.CURSOR_DOWN);break;case cc.macro.KEY.d:this.node.emit(o.CURSOR_RIGHT);break;case cc.macro.KEY.up:this.node.emit(o.SCREEN_UP);break;case cc.macro.KEY.left:this.node.emit(o.SCREEN_LEFT);break;case cc.macro.KEY.down:this.node.emit(o.SCREEN_DOWN);break;case cc.macro.KEY.right:this.node.emit(o.SCREEN_RIGHT);break;case cc.macro.KEY.enter:this.node.emit(o.ENTER);break;case cc.macro.KEY.escape:this.node.emit(o.ESCAPE)}},e.CURSOR_UP="CURSOR_UP",e.CURSOR_DOWN="CURSOR_DOWN",e.CURSOR_LEFT="CURSOR_LEFT",e.CURSOR_RIGHT="CURSOR_RIGHT",e.SCREEN_UP="SCREEN_UP",e.SCREEN_DOWN="SCREEN_DOWN",e.SCREEN_LEFT="SCREEN_LEFT",e.SCREEN_RIGHT="SCREEN_RIGHT",e.ENTER="ENTER",e.ESCAPE="ESCAPE",e=o=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],LandMap:[function(t,e,o){"use strict";cc._RF.push(e,"26d96yFtXNDjrz7dC7mDuw1","LandMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Grid"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabGrid=null,e.gridContainer=null,e.grids=new Map,e}return __extends(e,t),e.prototype.initPool=function(){for(var t=0;t<400;++t){var e=cc.instantiate(this.prefabGrid);e.setParent(this.gridContainer),e.active=!0;var o=e.getComponent(n.default);o.landX=t%20,o.landY=Math.floor(t/20),this.grids.set(o.landX+":"+o.landY,o)}},e.prototype.resetUV=function(){this.grids.forEach(function(t,e){t.resetUV()})},e.prototype.setMap=function(t){for(var e=0;e<t.length;++e)for(var o=0;o<t[e].length;++o){var n=this.getGridByXY([o,e]);n&&n.setType(t[e][o])}},e.prototype.setMapOneLevel=function(t){for(var e=0;e<t.length;++e){var o=e%20,n=Math.floor(e/20),i=this.getGridByXY([o,n]);i&&i.setType(t[e])}},e.prototype.showMovableGrid=function(t){var e=this;this.clearRange(),t.forEach(function(t){var o=e.getGridByXY(t);o&&o.showMoveRange()})},e.prototype.showWeaponRange=function(t){var e=this;this.closeWeaponRange(),t.forEach(function(t){var o=e.getGridByXY(t);o&&o.showWeaponRange()})},e.prototype.showMapRange=function(t){var e=this;this.closeMapRange(),t.forEach(function(t){var o=e.getGridByXY(t);o&&o.showMapRange()})},e.prototype.closeMapRange=function(){this.grids.forEach(function(t){t.showMapRange(!1)})},e.prototype.closeWeaponRange=function(){this.grids.forEach(function(t){t.showWeaponRange(!1)})},e.prototype.clearRange=function(){this.grids.forEach(function(t){t.showNormal()})},e.prototype.getGridByXY=function(t){return this.grids.get(t[0]+":"+t[1])},__decorate([a(cc.Node)],e.prototype,"prefabGrid",void 0),__decorate([a(cc.Node)],e.prototype,"gridContainer",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./Grid":"Grid"}],LandUnits:[function(t,e,o){"use strict";cc._RF.push(e,"54263U1NhlMCaxxE5xdJmaf","LandUnits"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Unit"),i=t("../Pool"),r=t("../ViewController"),a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerColor=null,e.playerEndColor=null,e.enemyColor=null,e.enemyEndColor=null,e.prefabUnit=null,e._units=[],e}return __extends(e,t),e.prototype.start=function(){},e.prototype.onLoad=function(){this._pool=this.node.getComponent(i.default)},e.prototype.setUnits=function(t){this.clearUnits();for(var e=0,o=t;e<o.length;e++){var i=o[e],a=i.key,c=i.robotState.robotKey,s="player"==i.playerKey,u=void 0!=i.robotState.tags.done,p=void 0!=i.robotState.tags.sky,l=i.position,d=this._pool.acquire();d.setParent(this.node);var f=r.default.instance.view.getGridPos(l);d.x=f[0],d.y=f[1],d.active=!0;var h=d.getComponent(n.default);h.unitId=a,p&&(h.node.y+=6),h.setUnitImage(c),s?u?h.setColor(this.playerEndColor):h.setColor(this.playerColor):u?h.setColor(this.enemyEndColor):h.setColor(this.enemyColor),this._units.push(d)}},e.prototype.shakeOneUnit=function(t){var e=this.getUnitByID(t);e&&e.shake()},e.prototype.evadeOneUnit=function(t){var e=this.getUnitByID(t);e&&e.evade()},e.prototype.toSkyUnit=function(t,e){var o=this.getUnitByID(t);o&&o.toSky(e)},e.prototype.toLandUnit=function(t,e){var o=this.getUnitByID(t);o&&o.toLand(e)},e.prototype.clearUnits=function(){var t=this;this._units.forEach(function(e){t._removeUnit(e)}),this._units=[]},e.prototype.removeUnitByID=function(t){var e=this.getUnitByID(t);e&&this._removeUnit(e.node)},e.prototype.setUnitPos=function(t,e){var o=this.getUnitByID(t);if(o){var n=r.default.instance.view.getGridPos(e);o.node.x=n[0],o.node.y=n[1]}},e.prototype.getUnitByID=function(t){for(var e=0,o=this._units;e<o.length;e++){var i=o[e];if(i.getComponent(n.default).unitId==t)return i.getComponent(n.default)}},e.prototype.moveUnitByID=function(t,e,o){var n=this.getUnitByID(t);if(n){var i=[];e.forEach(function(t){var e=r.default.instance.view.getGridPos(t),o=cc.moveTo(.05,e[0],e[1]);i.push(o)}),i.push(cc.callFunc(o)),n.node.runAction(cc.sequence(i))}},e.prototype._removeUnit=function(t){t.removeFromParent(),t.getComponent(n.default).unitId="",t.getComponent(n.default).unit.y=0,this._pool.release(t)},__decorate([s(cc.Color)],e.prototype,"playerColor",void 0),__decorate([s(cc.Color)],e.prototype,"playerEndColor",void 0),__decorate([s(cc.Color)],e.prototype,"enemyColor",void 0),__decorate([s(cc.Color)],e.prototype,"enemyEndColor",void 0),__decorate([s(n.default)],e.prototype,"prefabUnit",void 0),e=__decorate([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Pool":"Pool","../ViewController":"ViewController","./Unit":"Unit"}],MainPageDefaultState:[function(t,e,o){"use strict";cc._RF.push(e,"8ea29ZzLodPmqEWSWhQSGh9","MainPageDefaultState"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../DefaultState"),i=cc._decorator,r=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onPrevClick=function(t){t.onMenuUpClick()},e.prototype.onNextClick=function(t){t.onMenuDownClick()},e.prototype.onLeftClick=function(t){},e.prototype.onRightClick=function(t){},e.prototype.onEnterClick=function(t){t.onMenuEnterClick()},e.prototype.onEscClick=function(t){},e=__decorate([r],e)}(n.default));o.default=a,cc._RF.pop()},{"../DefaultState":"DefaultState"}],MainPage:[function(t,e,o){"use strict";cc._RF.push(e,"eeb4bMXGERFGZWM95sIZJ6j","MainPage"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../BasicViewer"),i=t("../MenuButtons"),r=t("../InputSensor"),a=t("../StateController"),c=t("../MainPage/MainPageDefaultState"),s=t("../ViewController"),u=t("../MainPage/RobotStore/RobotStore"),p=t("../MainPage/PilotStore/PilotStore"),l=t("../MainPage/StandBy/StandBy"),d=t("../MainPage/RobotStoreState"),f=t("../MainPage/RobotStoreBuyState"),h=t("../MainPage/PilotStoreState"),y=t("../MainPage/PilotStoreBuyState"),_=t("../MainPage/StandyByState"),m=t("../MainPage/StandyByRobotDetailState"),g=t("../MainPage/StandyByRobotPilotState"),C=t("../MainPage/StandyByRobotPilotPopState"),v=cc._decorator,S=v.ccclass,b=v.property,P=v.requireComponent,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.menu=null,e.robotStore=null,e.pilotStore=null,e.standBy=null,e.money=null,e}return __extends(e,t),e.prototype.init=function(){this._state=this.node.getComponent(a.default),this.menu.updateItem=function(t,e){t.setLabel(e)}},e.prototype.open=function(){t.prototype.open.call(this),this.menu.open(),this.menu.setData(["\u6574\u5099\u90e8\u968a","\u8cfc\u8cb7\u6a5f\u9ad4","\u96c7\u50ad\u99d5\u99db","\u51fa\u64ca"]),this.backToLooby()},e.prototype.addListener=function(){t.prototype.addListener.call(this),this.node.on(r.default.CURSOR_UP,this._onMainPageCursorUp,this),this.node.on(r.default.CURSOR_LEFT,this._onMainPageCursorLeft,this),this.node.on(r.default.CURSOR_RIGHT,this._onMainPageCursorRight,this),this.node.on(r.default.CURSOR_DOWN,this._onMainPageCursorDown,this),this.node.on(r.default.ENTER,this._onMainPageCursorEnter,this),this.node.on(r.default.ESCAPE,this._onMainPageCursorEsc,this)},e.prototype.removeListenser=function(){t.prototype.removeListenser.call(this),this.node.off(r.default.CURSOR_UP,this._onMainPageCursorUp,this),this.node.off(r.default.CURSOR_LEFT,this._onMainPageCursorLeft,this),this.node.off(r.default.CURSOR_RIGHT,this._onMainPageCursorRight,this),this.node.off(r.default.CURSOR_DOWN,this._onMainPageCursorDown,this),this.node.off(r.default.ENTER,this._onMainPageCursorEnter,this),this.node.off(r.default.ESCAPE,this._onMainPageCursorEsc,this)},e.prototype.close=function(){this.closeAllSub(),t.prototype.close.call(this)},e.prototype.onMenuUpClick=function(){this.menu.onPrevClick()},e.prototype.onMenuDownClick=function(){this.menu.onNextClick()},e.prototype.onMenuEnterClick=function(){switch(this.menu.getFocus()){case"\u6574\u5099\u90e8\u968a":this.openStandBy();break;case"\u8cfc\u8cb7\u6a5f\u9ad4":this.openRobotStore();break;case"\u96c7\u50ad\u99d5\u99db":this.openPilotStore();break;case"\u51fa\u64ca":s.default.instance.view.openGamePage()}},e.prototype.onRobotStoreUpClick=function(){this.robotStore.robotList.onPrevClick(this)},e.prototype.onRobotStoreDownClick=function(){this.robotStore.robotList.onNextClick(this)},e.prototype.onRobotStoreLeftClick=function(){this.robotStore.robotList.onLeftClick(this)},e.prototype.onRobotStoreRightClick=function(){this.robotStore.robotList.onRightClick(this)},e.prototype.onRobotStoreEnterClick=function(){this._state.changeState(new f.default);this.robotStore.robotList.getFocus();s.default.instance.view.getCommentUI().openPopup("\u78ba\u5b9a\u8981\u8cb7\uff1f")},e.prototype.onRobotStoreEscClick=function(){this.backToLooby()},e.prototype.onPilotStoreUpClick=function(){this.pilotStore.pilotList.onPrevClick(this)},e.prototype.onPilotStoreDownClick=function(){this.pilotStore.pilotList.onNextClick(this)},e.prototype.onPilotStoreLeftClick=function(){this.pilotStore.pilotList.onLeftClick(this)},e.prototype.onPilotStoreRightClick=function(){this.pilotStore.pilotList.onRightClick(this)},e.prototype.onPilotStoreEnterClick=function(){this._state.changeState(new y.default);this.pilotStore.pilotList.getFocus();s.default.instance.view.getCommentUI().openPopup("\u78ba\u5b9a\u8981\u8cb7\uff1f")},e.prototype.onPilotStoreEscClick=function(){this.backToLooby()},e.prototype.onPilotStoreBuyLeftClick=function(){s.default.instance.view.getCommentUI().popPanel.onLeftClick()},e.prototype.onPilotStoreBuyRightClick=function(){s.default.instance.view.getCommentUI().popPanel.onRightClick()},e.prototype.onPilotStoreBuyEnterClick=function(){if(0==s.default.instance.view.getCommentUI().popPanel.getCursor()[0]){var t=this.pilotStore.pilotList.getFocus();s.default.instance.model.buyPilotById(t.key,function(t,e){cc.log(e),s.default.instance.view.getCommentUI().showAlert("\u5df2\u8cfc\u8cb7")})}s.default.instance.view.getCommentUI().closePop(),this._state.changeState(new h.default)},e.prototype.onPilotStoreBuyEscClick=function(){s.default.instance.view.getCommentUI().closePop(),this._state.changeState(new h.default)},e.prototype.onRobotStoreBuyLeftClick=function(){s.default.instance.view.getCommentUI().popPanel.onLeftClick()},e.prototype.onRobotStoreBuyRightClick=function(){s.default.instance.view.getCommentUI().popPanel.onRightClick()},e.prototype.onRobotStoreBuyEnterClick=function(){if(0==s.default.instance.view.getCommentUI().popPanel.getCursor()[0]){var t=this.robotStore.robotList.getFocus();s.default.instance.model.buyRobotById(t.key,function(t,e){s.default.instance.view.getCommentUI().showAlert("\u5df2\u8cfc\u8cb7")})}s.default.instance.view.getCommentUI().closePop(),this._state.changeState(new d.default)},e.prototype.onRobotStoreBuyEscClick=function(){s.default.instance.view.getCommentUI().closePop(),this._state.changeState(new d.default)},e.prototype.onStandByUpClick=function(){this.standBy.robotList.onPrevClick(this)},e.prototype.onStandByDownClick=function(){this.standBy.robotList.onNextClick(this)},e.prototype.onStandByLeftClick=function(){this.standBy.robotList.onLeftClick(this)},e.prototype.onStandByRightClick=function(){this.standBy.robotList.onRightClick(this)},e.prototype.onStandByEnterClick=function(){this._state.changeState(new m.default);this.standBy.robotList.getFocus();this.standBy.openRobotDetail()},e.prototype.onStandByEscClick=function(){this.backToLooby()},e.prototype.onStandByRobotDetailEnterClick=function(){var t=this.standBy.robotDetail.feature.getFocusId(),e=this.standBy.robotList.getFocusId();cc.log("buttonId",t),cc.log("robotId",e),0==t[0]&&(this.standBy.setPilotList(),this._state.changeState(new g.default))},e.prototype.onStandByRobotDetailEscClick=function(){this.standBy.closeRobotDetail(),this._state.changeState(new _.default)},e.prototype.onStandByRobotPilotUpClick=function(){this.standBy.pilotList.onPrevClick()},e.prototype.onStandByRobotPilotDownClick=function(){this.standBy.pilotList.onNextClick()},e.prototype.onStandByRobotPilotEnterClick=function(){var t=this.standBy.pilotList.getFocusId();cc.log("pilotId",t),s.default.instance.view.getCommentUI().openPopup("\u78ba\u5b9a\uff1f"),this._state.changeState(new C.default)},e.prototype.onStandByRobotPilotEscClick=function(){this.standBy.pilotList.close(),this._state.changeState(new m.default)},e.prototype.onStandByRobotPilotPopLeftClick=function(){s.default.instance.view.getCommentUI().popPanel.onLeftClick()},e.prototype.onStandByRobotPilotPopRightClick=function(){s.default.instance.view.getCommentUI().popPanel.onRightClick()},e.prototype.onStandByRobotPilotPopEnterClick=function(){var t=this;if(0==s.default.instance.view.getCommentUI().popPanel.getCursor()[0]){var e=this.standBy.robotList.getFocus(),o=this.standBy.pilotList.getFocus();s.default.instance.model.setRobotPilot(e.standbyKey,o.standbyKey,function(e,o){cc.log(o),s.default.instance.view.getCommentUI().showAlert("\u5df2\u4fee\u6539"),t.standBy.pilotList.close(),s.default.instance.view.getCommentUI().closePop(),t._state.changeState(new m.default)})}else this.onStandByRobotPilotPopEscClick()},e.prototype.onStandByRobotPilotPopEscClick=function(){s.default.instance.view.getCommentUI().closePop(),this._state.changeState(new g.default)},e.prototype.openRobotStore=function(){this.closeAllSub(),this.robotStore.open(),this.robotStore.setRobotList(),this._state.changeState(new d.default)},e.prototype.openPilotStore=function(){this.closeAllSub(),this.pilotStore.open(),this.pilotStore.setPilotList(),this._state.changeState(new h.default)},e.prototype.openStandBy=function(){this.closeAllSub(),this.standBy.open(),this.standBy.setRobotList(),this._state.changeState(new _.default)},e.prototype.backToLooby=function(){this.closeAllSub(),this._state.changeState(new c.default)},e.prototype.closeAllSub=function(){this.robotStore.close(),this.pilotStore.close(),this.standBy.close()},e.prototype.setMoney=function(t){this.money.string=t.toString()},e.prototype._onMainPageCursorUp=function(){this._state.onPrevClick(this)},e.prototype._onMainPageCursorLeft=function(){this._state.onLeftClick(this)},e.prototype._onMainPageCursorRight=function(){this._state.onRightClick(this)},e.prototype._onMainPageCursorDown=function(){this._state.onNextClick(this)},e.prototype._onMainPageCursorEnter=function(){this._state.onEnterClick(this)},e.prototype._onMainPageCursorEsc=function(){this._state.onEscClick(this)},__decorate([b(i.default)],e.prototype,"menu",void 0),__decorate([b(u.default)],e.prototype,"robotStore",void 0),__decorate([b(p.default)],e.prototype,"pilotStore",void 0),__decorate([b(l.default)],e.prototype,"standBy",void 0),__decorate([b(cc.Label)],e.prototype,"money",void 0),e=__decorate([S,P(cc.Layout)],e)}(n.default);o.default=w,cc._RF.pop()},{"../BasicViewer":"BasicViewer","../InputSensor":"InputSensor","../MainPage/MainPageDefaultState":"MainPageDefaultState","../MainPage/PilotStore/PilotStore":"PilotStore","../MainPage/PilotStoreBuyState":"PilotStoreBuyState","../MainPage/PilotStoreState":"PilotStoreState","../MainPage/RobotStore/RobotStore":"RobotStore","../MainPage/RobotStoreBuyState":"RobotStoreBuyState","../MainPage/RobotStoreState":"RobotStoreState","../MainPage/StandBy/StandBy":"StandBy","../MainPage/StandyByRobotDetailState":"StandyByRobotDetailState","../MainPage/StandyByRobotPilotPopState":"StandyByRobotPilotPopState","../MainPage/StandyByRobotPilotState":"StandyByRobotPilotState","../MainPage/StandyByState":"StandyByState","../MenuButtons":"MenuButtons","../StateController":"StateController","../ViewController":"ViewController"}],MenuButtons:[function(t,e,o){"use strict";cc._RF.push(e,"13645lCKVdNl64bK7B8DTFA","MenuButtons"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./MenuButton"),i=t("./BasicViewer"),r=t("./MenuCursor"),a=cc._decorator,c=a.ccclass,s=a.property,u=a.requireComponent,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabButton=null,e._btns=[],e.updateItem=null,e}var o;return __extends(e,t),o=e,e.prototype.onLoad=function(){this._menuCursor=this.node.getComponent(r.default)},e.prototype.onPrevClick=function(t){this._menuCursor.previus(),this.node.emit(o.ON_MENU_UP,this._menuCursor.getCurrentId())},e.prototype.onNextClick=function(t){this._menuCursor.next(),this.node.emit(o.ON_MENU_DOWN,this._menuCursor.getCurrentId())},e.prototype.onLeftClick=function(t){this._menuCursor.left(),this.node.emit(o.ON_MENU_LEFT,this._menuCursor.getCurrentId())},e.prototype.onRightClick=function(t){this._menuCursor.right(),this.node.emit(o.ON_MENU_RIGHT,this._menuCursor.getCurrentId())},e.prototype.onEnterClick=function(t){this.node.emit(o.ON_MENU_ENTER,this._menuCursor.getCurrentFocus())},e.prototype.onEscClick=function(t){this.node.emit(o.ON_MENU_ENTER,"cancel")},e.prototype.getFocus=function(){return this._menuCursor.getCurrentFocus()},e.prototype.getFocusId=function(){return this._menuCursor.getCurrentId()},e.prototype.addListener=function(){var e=this;t.prototype.addListener.call(this),this.node.on(r.default.ON_CURSOR_CHANGE,function(t){e._focusOn(t[0]),e._refreshButtonLabel()},this)},e.prototype.removeListenser=function(){t.prototype.removeListenser.call(this),this.node.off(r.default.ON_CURSOR_CHANGE),this._btns.forEach(function(t){t.node.destroy()}),this._btns=[]},e.prototype.setData=function(t,e){var o=this;this._menuCursor.setData(t,e);var i=0;(t=this._menuCursor.getData()).forEach(function(r){var a=cc.instantiate(o.prefabButton.node);a.setParent(o.node),a.active=!0;var c=a.getComponent(n.default),s=e?e[1][i]:0;o.updateItem&&o.updateItem(c,t[i++][s]),o._btns.push(c)}),this._focusOn(e?e[0]:0)},e.prototype._refreshButtonLabel=function(){var t=this._menuCursor.getCurrentId();this.updateItem&&this.updateItem(this._btns[t[0]],this._menuCursor.getCurrentFocus())},e.prototype._focusOn=function(t){this._btns.forEach(function(t){t.setFocus(!1)}),this._btns[t].setFocus(!0)},e.ON_MENU_ENTER="ON_MENU_ENTER",e.ON_MENU_LEFT="ON_MENU_LEFT",e.ON_MENU_RIGHT="ON_MENU_RIGHT",e.ON_MENU_UP="ON_MENU_UP",e.ON_MENU_DOWN="ON_MENU_DOWN",__decorate([s(n.default)],e.prototype,"prefabButton",void 0),e=o=__decorate([c,u(r.default)],e)}(i.default);o.default=p,cc._RF.pop()},{"./BasicViewer":"BasicViewer","./MenuButton":"MenuButton","./MenuCursor":"MenuCursor"}],MenuButton:[function(t,e,o){"use strict";cc._RF.push(e,"e8dce8PEKZJNKgtztlVWvIP","MenuButton"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lblName=null,e.backColor=null,e}return __extends(e,t),e.prototype.setLabel=function(t){this.lblName.string=t},e.prototype.setFocus=function(t){this.backColor.node.color=t?cc.Color.YELLOW:cc.Color.WHITE},__decorate([r(cc.Label)],e.prototype,"lblName",void 0),__decorate([r(cc.Sprite)],e.prototype,"backColor",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],MenuCursor:[function(t,e,o){"use strict";cc._RF.push(e,"df4cccrbHBOwJK6eKGW8yTW","MenuCursor"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._cursor1=0,e._cursor2=[],e}var o;return __extends(e,t),o=e,e.prototype.setData=function(t,e){var o=this;if(null==t)throw new Error("data must not null");this._data=t,this._cursor1=0,this._cursor2=[];var n=0;t.forEach(function(t){Array.isArray(t)||(o._data[n]=[t]),o._cursor2.push(0),n++}),e&&(this._cursor1=e[0],this._cursor2=e[1])},e.prototype.getData=function(){return this._data},e.prototype._focusOn=function(){this.node.emit(o.ON_CURSOR_CHANGE,this.getCurrentId())},e.prototype.previus=function(){return--this._cursor1<0&&(this._cursor1=this._data.length-1),this._focusOn(),this.getCurrentId()},e.prototype.next=function(){if(null==this._data)throw new Error("must call setData first");return++this._cursor1>this._data.length-1&&(this._cursor1=0),this._focusOn(),this.getCurrentId()},e.prototype.left=function(){return--this._cursor2[this._cursor1]<0&&(this._cursor2[this._cursor1]=this._data[this._cursor1].length-1),this._focusOn(),this.getCurrentId()},e.prototype.right=function(){return++this._cursor2[this._cursor1]>this._data[this._cursor1].length-1&&(this._cursor2[this._cursor1]=0),this._focusOn(),this.getCurrentId()},e.prototype.getCurrentId=function(){return[this._cursor1,this._cursor2[this._cursor1]]},e.prototype.getCurrentFocus=function(){return this.getData()[this._cursor1][this._cursor2[this._cursor1]]},e.ON_CURSOR_CHANGE="ON_CURSOR_CHANGE",e=o=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],ModelController:[function(t,e,o){"use strict";cc._RF.push(e,"2d0fdVaRDdGJIVwzKaI1vHZ","ModelController"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.seqId=0,e}return __extends(e,t),e.prototype.setConsumer=function(t){this.bindModel(),this.view=t,this.subscribe()},e.prototype.subscribe=function(){var t=this;this.viewOb.subscribe(function(e){var o=e[0],n=e[1];if(t.view[o]){var i=n[0],r=n[1];t.view[o](r,function(){t.send("ok",[i,0])})}})},e.prototype.startGame=function(){this.send("startGameplay")},e.prototype.startLobby=function(){this.send("startLobby")},e.prototype.endLobby=function(){this.send("exit")},e.prototype.loadConfig=function(t){this.talk("loadConfig",null,t)},e.prototype.talk=function(t,e,o){var n=this.seqId++;if(this.viewNotifyOb.next([t,[n+"",e]]),null!=o)var i=this.viewOb.subscribe(function(e){var r=e[0],a=e[1];if("ok"==r){var c=a[0],s=a[1];c==n?(i.unsubscribe(),o(s)):console.log("[talk][wait]"+t)}})},e.prototype.send=function(t,e){void 0===e&&(e=0),this.viewNotifyOb.next([t,e])},e.prototype.bindModel=function(){window.startApp(),this.viewNotifyOb=window.viewNotifyOb,this.viewOb=window.viewOb},e=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],Model:[function(t,e,o){"use strict";cc._RF.push(e,"1f1feFNN+pLfrqeLABwg/PW","Model"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./ViewController"),i=cc._decorator,r=i.ccclass,a=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.modelController=null,e}return __extends(e,t),e.prototype.setModelController=function(t){this.modelController=t},e.prototype.getRobotStoreList=function(t,e,o){void 0===e&&(e=10),this.modelController.talk("getRobotStoreList",{offset:t*e,limit:e},function(t){var e=t[0],i=t[1];e?n.default.instance.view.getCommentUI().showAlert(e):o(e,i)})},e.prototype.getPilotStoreList=function(t,e,o){void 0===e&&(e=10),this.modelController.talk("getPilotStoreList",{offset:t*e,limit:e},function(t){var e=t[0],i=t[1];e?n.default.instance.view.getCommentUI().showAlert(e):o(e,i)})},e.prototype.getRobotList=function(t,e,o){void 0===e&&(e=10),this.modelController.talk("getRobotList",{offset:t*e,limit:e},function(t){var e=t[0],i=t[1];e?n.default.instance.view.getCommentUI().showAlert(e):o(e,i)})},e.prototype.getPilotList=function(t,e,o){void 0===e&&(e=10),this.modelController.talk("getPilotList",{offset:t*e,limit:e},function(t){var e=t[0],i=t[1];e?n.default.instance.view.getCommentUI().showAlert(e):o(e,i)})},e.prototype.buyRobotById=function(t,e){this.modelController.talk("buyRobotById",{key:t},function(t){var o=t[0],i=t[1];o?n.default.instance.view.getCommentUI().showAlert(o):e(o,i)})},e.prototype.buyPilotById=function(t,e){this.modelController.talk("buyPilotById",{key:t},function(t){var o=t[0],i=t[1];o?n.default.instance.view.getCommentUI().showAlert(o):e(o,i)})},e.prototype.setRobotPilot=function(t,e,o){this.modelController.talk("setRobotPilot",{robotKey:t,pilotKey:e},function(t){var e=t[0],i=t[1];e?n.default.instance.view.getCommentUI().showAlert(e):o(e,i)})},e=__decorate([r],e)}(cc.Component));o.default=a,cc._RF.pop()},{"./ViewController":"ViewController"}],PilotListItem:[function(t,e,o){"use strict";cc._RF.push(e,"dc106yWBt5NoZ6vlP3bJVT2","PilotListItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../MenuButton"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.money=null,e}return __extends(e,t),__decorate([a(cc.Label)],e.prototype,"money",void 0),e=__decorate([r],e)}(n.default);o.default=c,cc._RF.pop()},{"../../MenuButton":"MenuButton"}],PilotStoreBuyState:[function(t,e,o){"use strict";cc._RF.push(e,"5bf8cC/cSxFgJaVXxeJS5DJ","PilotStoreBuyState"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../DefaultState"),i=cc._decorator,r=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onPrevClick=function(t){},e.prototype.onNextClick=function(t){},e.prototype.onLeftClick=function(t){t.onPilotStoreBuyLeftClick()},e.prototype.onRightClick=function(t){t.onPilotStoreBuyRightClick()},e.prototype.onEnterClick=function(t){t.onPilotStoreBuyEnterClick()},e.prototype.onEscClick=function(t){t.onPilotStoreBuyEscClick()},e=__decorate([r],e)}(n.default));o.default=a,cc._RF.pop()},{"../DefaultState":"DefaultState"}],PilotStoreState:[function(t,e,o){"use strict";cc._RF.push(e,"e840eXBWJtFJqnsXea9V+ZR","PilotStoreState"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../DefaultState"),i=cc._decorator,r=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onPrevClick=function(t){t.onPilotStoreUpClick()},e.prototype.onNextClick=function(t){t.onPilotStoreDownClick()},e.prototype.onLeftClick=function(t){t.onPilotStoreLeftClick()},e.prototype.onRightClick=function(t){t.onPilotStoreRightClick()},e.prototype.onEnterClick=function(t){t.onPilotStoreEnterClick()},e.prototype.onEscClick=function(t){t.onPilotStoreEscClick()},e=__decorate([r],e)}(n.default));o.default=a,cc._RF.pop()},{"../DefaultState":"DefaultState"}],PilotStore:[function(t,e,o){"use strict";cc._RF.push(e,"2ee87KJ0wREaLMoEDvt2EiG","PilotStore"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../BasicViewer"),i=t("../../MenuButtons"),r=t("../../ViewController"),a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pilotList=null,e}return __extends(e,t),e.prototype.init=function(){this.pilotList.updateItem=function(t,e){var o=t;o.setLabel(e.title),o.money.string=e.cost}},e.prototype.setPilotList=function(){var t=this;this.pilotList.open(),r.default.instance.model.getPilotStoreList(0,10,function(e,o){var n=o.map(function(t){var e=t[0],o=(t[1],r.default.instance.getPilot(e));return o.key=e,o});t.pilotList.setData(n)})},__decorate([s(i.default)],e.prototype,"pilotList",void 0),e=__decorate([c],e)}(n.default);o.default=u,cc._RF.pop()},{"../../BasicViewer":"BasicViewer","../../MenuButtons":"MenuButtons","../../ViewController":"ViewController"}],Pool:[function(t,e,o){"use strict";cc._RF.push(e,"89d15CJfQNMTpRG+HQvdB9Y","Pool"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.poolSize=30,e.instanceNode=null,e._pool=[],e}return __extends(e,t),e.prototype._init=function(){for(var t=0;t<this.poolSize;++t)this._pool.push(cc.instantiate(this.instanceNode))},e.prototype.onLoad=function(){this._init()},e.prototype.onDestroy=function(){this.clearPool()},e.prototype.acquire=function(){return 0==this._pool.length?cc.instantiate(this.instanceNode):this._pool.pop()},e.prototype.release=function(t){this._pool.unshift(t)},e.prototype.clearPool=function(){this._pool.forEach(function(t){t.destroy()}),this._pool=[]},__decorate([r(cc.Integer)],e.prototype,"poolSize",void 0),__decorate([r(cc.Node)],e.prototype,"instanceNode",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],PopPanel:[function(t,e,o){"use strict";cc._RF.push(e,"c2d505f3SxCsavKWF6A9UDU","PopPanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./MenuCursor"),i=t("./BasicViewer"),r=t("./MenuButton"),a=cc._decorator,c=a.ccclass,s=a.property,u=a.requireComponent,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnConfirm=null,e.btnCancel=null,e.content=null,e}return __extends(e,t),e.prototype.init=function(){this.node.getComponent(n.default).setData(["confirm","cancel"]),this.onRightClick()},e.prototype.setContent=function(t){this.content.string=t},e.prototype.onLeftClick=function(t){this.node.getComponent(n.default).previus(),this._focus(this.node.getComponent(n.default).getCurrentId())},e.prototype.onRightClick=function(t){this.node.getComponent(n.default).next(),this._focus(this.node.getComponent(n.default).getCurrentId())},e.prototype.getCursor=function(){return this.node.getComponent(n.default).getCurrentId()},e.prototype._focus=function(t){this.btnConfirm.setFocus(0==t[0]),this.btnCancel.setFocus(1==t[0])},__decorate([s(r.default)],e.prototype,"btnConfirm",void 0),__decorate([s(r.default)],e.prototype,"btnCancel",void 0),__decorate([s(cc.Label)],e.prototype,"content",void 0),e=__decorate([c,u(n.default)],e)}(i.default);o.default=p,cc._RF.pop()},{"./BasicViewer":"BasicViewer","./MenuButton":"MenuButton","./MenuCursor":"MenuCursor"}],RobotDetail:[function(t,e,o){"use strict";cc._RF.push(e,"37ff1sjTHBH64zUSNCi7Cc9","RobotDetail"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../MenuButtons"),i=t("../../BasicViewer"),r=t("../../GamePage/WeaponMenu"),a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.feature=null,e.weaponList=null,e}return __extends(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.feature.updateItem=function(t,e){t.setLabel(e)},this.feature.setData(["\u66f4\u63db\u99d5\u99db\u54e1"])},__decorate([s(n.default)],e.prototype,"feature",void 0),__decorate([s(r.default)],e.prototype,"weaponList",void 0),e=__decorate([c],e)}(i.default);o.default=u,cc._RF.pop()},{"../../BasicViewer":"BasicViewer","../../GamePage/WeaponMenu":"WeaponMenu","../../MenuButtons":"MenuButtons"}],RobotListItem:[function(t,e,o){"use strict";cc._RF.push(e,"8feffbYn0pGY4zQQwWrCgmV","RobotListItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../MenuButton"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.money=null,e}return __extends(e,t),__decorate([a(cc.Label)],e.prototype,"money",void 0),e=__decorate([r],e)}(n.default);o.default=c,cc._RF.pop()},{"../../MenuButton":"MenuButton"}],RobotSelectListItem:[function(t,e,o){"use strict";cc._RF.push(e,"735aftk3LFJKZXdac9ZSXx7","RobotSelectListItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../MenuButton"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pilot=null,e.readyIcon=null,e}return __extends(e,t),e.prototype.setReady=function(t){this.readyIcon.active=t},__decorate([a(cc.Label)],e.prototype,"pilot",void 0),__decorate([a(cc.Node)],e.prototype,"readyIcon",void 0),e=__decorate([r],e)}(n.default);o.default=c,cc._RF.pop()},{"../../MenuButton":"MenuButton"}],RobotSelectPanel:[function(t,e,o){"use strict";cc._RF.push(e,"21f94NjVrFL2Y614AzZIq6E","RobotSelectPanel"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../MenuButtons"),i=t("../../BasicViewer"),r=cc._decorator,a=r.ccclass,c=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.robotSelectList=null,e}return __extends(e,t),e.prototype.init=function(){this.robotSelectList.updateItem=function(t,e){var o=t;o.setLabel(e.robotState.robotKey),o.setReady(e.selected)}},e.prototype.setRobotList=function(t){var e;this.robotSelectList.close(),this.robotSelectList.open();var o=[];t.data.forEach(function(n){n.focus&&(e=t.data.indexOf(n)),o.push(0)}),this.robotSelectList.setData(t.data,[e,o])},__decorate([c(n.default)],e.prototype,"robotSelectList",void 0),e=__decorate([a],e)}(i.default);o.default=s,cc._RF.pop()},{"../../BasicViewer":"BasicViewer","../../MenuButtons":"MenuButtons"}],RobotStoreBuyState:[function(t,e,o){"use strict";cc._RF.push(e,"e17543tAIZB4Iyek8fJL/WX","RobotStoreBuyState"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../DefaultState"),i=cc._decorator,r=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onPrevClick=function(t){},e.prototype.onNextClick=function(t){},e.prototype.onLeftClick=function(t){t.onRobotStoreBuyLeftClick()},e.prototype.onRightClick=function(t){t.onRobotStoreBuyRightClick()},e.prototype.onEnterClick=function(t){t.onRobotStoreBuyEnterClick()},e.prototype.onEscClick=function(t){t.onRobotStoreBuyEscClick()},e=__decorate([r],e)}(n.default));o.default=a,cc._RF.pop()},{"../DefaultState":"DefaultState"}],RobotStoreState:[function(t,e,o){"use strict";cc._RF.push(e,"d2c08ujk9hJSp4EFQlDmijl","RobotStoreState"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../DefaultState"),i=cc._decorator,r=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onPrevClick=function(t){t.onRobotStoreUpClick()},e.prototype.onNextClick=function(t){t.onRobotStoreDownClick()},e.prototype.onLeftClick=function(t){t.onRobotStoreLeftClick()},e.prototype.onRightClick=function(t){t.onRobotStoreRightClick()},e.prototype.onEnterClick=function(t){t.onRobotStoreEnterClick()},e.prototype.onEscClick=function(t){t.onRobotStoreEscClick()},e=__decorate([r],e)}(n.default));o.default=a,cc._RF.pop()},{"../DefaultState":"DefaultState"}],RobotStore:[function(t,e,o){"use strict";cc._RF.push(e,"925a9xnNEVA+4X0GKC+ZYFh","RobotStore"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../BasicViewer"),i=t("../../MenuButtons"),r=t("../../ViewController"),a=cc._decorator,c=a.ccclass,s=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.robotList=null,e}return __extends(e,t),e.prototype.init=function(){this.robotList.updateItem=function(t,e){var o=t;o.setLabel(e.title),o.money.string=e.cost}},e.prototype.setRobotList=function(){var t=this;this.robotList.open(),r.default.instance.model.getRobotStoreList(0,10,function(e,o){var n=o.map(function(t){var e=t[0],o=(t[1],r.default.instance.getRobot(e));return o.key=e,o});t.robotList.setData(n)})},__decorate([s(i.default)],e.prototype,"robotList",void 0),e=__decorate([c],e)}(n.default);o.default=u,cc._RF.pop()},{"../../BasicViewer":"BasicViewer","../../MenuButtons":"MenuButtons","../../ViewController":"ViewController"}],ShowItem:[function(t,e,o){"use strict";cc._RF.push(e,"23ea7mbWnxP1Z92+cB/p2te","ShowItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Pool"),i=t("./ViewController"),r=cc._decorator,a=r.ccclass,c=(r.property,r.requireComponent),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._items=[],e}return __extends(e,t),e.prototype.onLoad=function(){this._pool=this.node.getComponent(n.default)},e.prototype.showItems=function(t,e){var o=this;this.clearItem(),t.forEach(function(t){o.showItem(t,e)})},e.prototype.showItem=function(t,e){var o=this._pool.acquire();o.active=!0,o.setParent(this.node);var n=i.default.instance.view.getGridPos(t);o.x=n[0],o.y=n[1],this._items.push(o),e&&e(o)},e.prototype.clearItem=function(){var t=this;this._items.forEach(function(e){e.active=!1,e.removeFromParent(),t._pool.release(e)}),this._items=[]},e=__decorate([a,c(n.default)],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./Pool":"Pool","./ViewController":"ViewController"}],SmallMap:[function(t,e,o){"use strict";cc._RF.push(e,"17266HJkVBHKZAlladmu5+Y","SmallMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.map=null,e.colors=[],e}return __extends(e,t),e.prototype.drawDot=function(t,e){this.map.fillColor=this.colors[e],this.map.fillRect(t[0],-t[1],2,2)},e.prototype.drawMap=function(t){for(var e=0;e<t.length;++e)for(var o=0;o<t[e].length;++o){t[e][o];this.drawDot([2*o-100,2*e-100],t[e][o])}},__decorate([r(cc.Graphics)],e.prototype,"map",void 0),__decorate([r(cc.Color)],e.prototype,"colors",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],StandBy:[function(t,e,o){"use strict";cc._RF.push(e,"d2e5cb+wS9FeK6gjNvZT8oE","StandBy"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../BasicViewer"),i=t("../../MenuButtons"),r=t("./RobotDetail"),a=t("../../ViewController"),c=cc._decorator,s=c.ccclass,u=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.robotList=null,e.pilotList=null,e.robotDetail=null,e}return __extends(e,t),e.prototype.init=function(){this.robotList.updateItem=function(t,e){var o=t;o.setLabel(e.key),o.money.string=""},this.pilotList.updateItem=function(t,e){t.setLabel(e.key)},this.robotDetail.close()},e.prototype.setRobotList=function(){var t=this;this.robotList.open(),a.default.instance.model.getRobotList(0,10,function(e,o){if(o.length>0){var n=o.map(function(t){return{standbyKey:t[0],key:t[1]}});t.robotList.setData(n)}})},e.prototype.setPilotList=function(){var t=this;this.pilotList.open(),a.default.instance.model.getPilotList(0,10,function(e,o){if(o.length>0){var n=o.map(function(t){return{standbyKey:t[0],key:t[1]}});t.pilotList.setData(n)}})},e.prototype.openRobotDetail=function(){this.robotDetail.open()},e.prototype.closeRobotDetail=function(){this.robotDetail.close()},__decorate([u(i.default)],e.prototype,"robotList",void 0),__decorate([u(i.default)],e.prototype,"pilotList",void 0),__decorate([u(r.default)],e.prototype,"robotDetail",void 0),e=__decorate([s],e)}(n.default);o.default=p,cc._RF.pop()},{"../../BasicViewer":"BasicViewer","../../MenuButtons":"MenuButtons","../../ViewController":"ViewController","./RobotDetail":"RobotDetail"}],StandyByRobotDetailState:[function(t,e,o){"use strict";cc._RF.push(e,"51c8a8EYulGeIzXwAglDW+4","StandyByRobotDetailState"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../DefaultState"),i=cc._decorator,r=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onPrevClick=function(t){},e.prototype.onNextClick=function(t){},e.prototype.onLeftClick=function(t){},e.prototype.onRightClick=function(t){},e.prototype.onEnterClick=function(t){t.onStandByRobotDetailEnterClick()},e.prototype.onEscClick=function(t){t.onStandByRobotDetailEscClick()},e=__decorate([r],e)}(n.default));o.default=a,cc._RF.pop()},{"../DefaultState":"DefaultState"}],StandyByRobotPilotPopState:[function(t,e,o){"use strict";cc._RF.push(e,"2a2bd5va29PhLZEra8/X3Jl","StandyByRobotPilotPopState"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../DefaultState"),i=cc._decorator,r=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onPrevClick=function(t){},e.prototype.onNextClick=function(t){},e.prototype.onLeftClick=function(t){t.onStandByRobotPilotPopLeftClick()},e.prototype.onRightClick=function(t){t.onStandByRobotPilotPopRightClick()},e.prototype.onEnterClick=function(t){t.onStandByRobotPilotPopEnterClick()},e.prototype.onEscClick=function(t){t.onStandByRobotPilotPopEscClick()},e=__decorate([r],e)}(n.default));o.default=a,cc._RF.pop()},{"../DefaultState":"DefaultState"}],StandyByRobotPilotState:[function(t,e,o){"use strict";cc._RF.push(e,"a6350otd6JHU6gy3KhhZ97i","StandyByRobotPilotState"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../DefaultState"),i=cc._decorator,r=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onPrevClick=function(t){t.onStandByRobotPilotUpClick()},e.prototype.onNextClick=function(t){t.onStandByRobotPilotDownClick()},e.prototype.onLeftClick=function(t){},e.prototype.onRightClick=function(t){},e.prototype.onEnterClick=function(t){t.onStandByRobotPilotEnterClick()},e.prototype.onEscClick=function(t){t.onStandByRobotPilotEscClick()},e=__decorate([r],e)}(n.default));o.default=a,cc._RF.pop()},{"../DefaultState":"DefaultState"}],StandyByState:[function(t,e,o){"use strict";cc._RF.push(e,"c3ac1zvPBFGKaO3/5AHa3hj","StandyByState"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../DefaultState"),i=cc._decorator,r=i.ccclass,a=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onPrevClick=function(t){t.onStandByUpClick()},e.prototype.onNextClick=function(t){t.onStandByDownClick()},e.prototype.onLeftClick=function(t){t.onStandByLeftClick()},e.prototype.onRightClick=function(t){t.onStandByRightClick()},e.prototype.onEnterClick=function(t){t.onStandByEnterClick()},e.prototype.onEscClick=function(t){t.onStandByEscClick()},e=__decorate([r],e)}(n.default));o.default=a,cc._RF.pop()},{"../DefaultState":"DefaultState"}],StateController:[function(t,e,o){"use strict";cc._RF.push(e,"12fadEmeSxKLK/cTgWnNVhk","StateController"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.current=null,e}return __extends(e,t),e.prototype.changeState=function(t){this.current=t},e.prototype.onPrevClick=function(t){this.current.onPrevClick(t)},e.prototype.onNextClick=function(t){this.current.onNextClick(t)},e.prototype.onLeftClick=function(t){this.current.onLeftClick(t)},e.prototype.onRightClick=function(t){this.current.onRightClick(t)},e.prototype.onEnterClick=function(t){this.current.onEnterClick(t)},e.prototype.onEscClick=function(t){this.current.onEscClick(t)},e=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],TextEffect:[function(t,e,o){"use strict";cc._RF.push(e,"93fdamcxERK67xbL4mZCTzF","TextEffect"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.contentShadow=null,e}return __extends(e,t),e.prototype.setContent=function(t){this.content.string=t,this.contentShadow.string=t},__decorate([r(cc.Label)],e.prototype,"content",void 0),__decorate([r(cc.Label)],e.prototype,"contentShadow",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],TurnStart:[function(t,e,o){"use strict";cc._RF.push(e,"978dec5M+hJCKXr2+tl8sSA","TurnStart"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../BasicViewer"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.backColor=null,e}return __extends(e,t),e.prototype.setContent=function(t){this.content.string=t},e.prototype.setPlayer=function(t){this.backColor.node.color=t?cc.Color.BLUE:cc.Color.RED},e.prototype.open=function(){t.prototype.open.call(this),this.node.getComponent(cc.Animation).play("TurnStart")},e.prototype.end=function(){this.node.emit("end"),this.close()},__decorate([a(cc.Label)],e.prototype,"content",void 0),__decorate([a(cc.Sprite)],e.prototype,"backColor",void 0),e=__decorate([r],e)}(n.default);o.default=c,cc._RF.pop()},{"../BasicViewer":"BasicViewer"}],UVReset:[function(t,e,o){"use strict";cc._RF.push(e,"d51cb2AgklN67f6B+lX8RuT","UVReset"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.fix=function(){var t=this.getComponent(cc.Sprite).spriteFrame.getTexture(),e=this.getComponent(cc.Sprite).spriteFrame.getRect(),o=e.x/t.width,n=(e.x+e.width)/t.width,i=e.y/t.height,r=(e.y+e.height)/t.height;this.getComponent(cc.Sprite).getMaterial(0).setProperty("resetUV",[o,n-o,i,r-i])},e=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],UnitSampleInfo:[function(t,e,o){"use strict";cc._RF.push(e,"8478cht7zVEJ5sGN29xenHU","UnitSampleInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hpSprite=null,e.enSprite=null,e}return __extends(e,t),e.prototype.showHPEN=function(t,e,o,n){this.hpSprite.node.scaleX=e/t,this.enSprite.node.scaleX=n/o},e.prototype.changeHP=function(t,e){cc.tween(this.hpSprite.node).to(.7,{scaleX:e/t},{easing:"quartOut"}).start()},e.prototype.changeEN=function(t,e){cc.tween(this.enSprite.node).to(.7,{scaleX:e/t},{easing:"quartOut"}).start()},__decorate([r(cc.Sprite)],e.prototype,"hpSprite",void 0),__decorate([r(cc.Sprite)],e.prototype,"enSprite",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],UnitStatuMenu:[function(t,e,o){"use strict";cc._RF.push(e,"7c612wl6xlLUKyPb1XuzIBR","UnitStatuMenu"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../BasicViewer"),i=t("../ViewController"),r=cc._decorator,a=r.ccclass,c=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.unitSection=null,e.terrainSection=null,e.unitImage=null,e.unitName=null,e.unitHpLabal=null,e.unitEnLabal=null,e.unitHpBar=null,e.unitEnBar=null,e.landImage=null,e.moveBuff=null,e.accuracyBuff=null,e.damageBuff=null,e}return __extends(e,t),e.prototype.setUnit=function(t){if(this.unitSection.active=!1,null!=t){this.unitSection.active=!0;var e=i.default.instance.imagesAssets.getImageByKey(t.robotState.robotKey);void 0!=e&&(this.unitImage.spriteFrame=e),this.unitName.string=t.robotState.robotKey;var o=t.robotState.hp,n=t.robotState.en,r=t.robotState.maxHp,a=t.robotState.maxEn;this.unitHpLabal.string=o+"/"+r,this.unitEnLabal.string=n+"/"+a,this.unitHpBar.node.scaleX=o/r,this.unitEnBar.node.scaleX=n/a}},e.prototype.setTerrain=function(t){if(this.terrainSection.active=!1,null!=t){this.terrainSection.active=!0;var e=i.default.instance.imagesAssets.getImageByKey(t.title);void 0!=e&&(this.landImage.spriteFrame=e),this.moveBuff.string="\u79fb\u52d5\u88dc\u6b63="+t.cost,this.accuracyBuff.string="\u547d\u4e2d\u88dc\u6b63="+t.hitRate,this.damageBuff.string="\u50b7\u5bb3\u88dc\u6b63="+t.damage}},__decorate([c(cc.Node)],e.prototype,"unitSection",void 0),__decorate([c(cc.Node)],e.prototype,"terrainSection",void 0),__decorate([c(cc.Sprite)],e.prototype,"unitImage",void 0),__decorate([c(cc.Label)],e.prototype,"unitName",void 0),__decorate([c(cc.Label)],e.prototype,"unitHpLabal",void 0),__decorate([c(cc.Label)],e.prototype,"unitEnLabal",void 0),__decorate([c(cc.Sprite)],e.prototype,"unitHpBar",void 0),__decorate([c(cc.Sprite)],e.prototype,"unitEnBar",void 0),__decorate([c(cc.Sprite)],e.prototype,"landImage",void 0),__decorate([c(cc.Label)],e.prototype,"moveBuff",void 0),__decorate([c(cc.Label)],e.prototype,"accuracyBuff",void 0),__decorate([c(cc.Label)],e.prototype,"damageBuff",void 0),e=__decorate([a],e)}(n.default);o.default=s,cc._RF.pop()},{"../BasicViewer":"BasicViewer","../ViewController":"ViewController"}],Unit:[function(t,e,o){"use strict";cc._RF.push(e,"f0796q7hc9JhrtYdaV826ul","Unit"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../ViewController"),i=cc._decorator,r=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.unit=null,e.unitImage=null,e.unitId="",e}return __extends(e,t),e.prototype.setUnitImage=function(t){var e=n.default.instance.imagesAssets.getImageByKey(t);void 0!=e&&(this.unitImage.spriteFrame=e)},e.prototype.setColor=function(t){this.unitImage.node.color=t},e.prototype.shake=function(){this.node.getComponent(cc.Animation).play("UnitShake")},e.prototype.evade=function(){this.node.getComponent(cc.Animation).play("UnitEvade")},e.prototype.toSky=function(t){cc.tween(this.node).by(.5,{y:6}).call(t).start()},e.prototype.toLand=function(t){cc.tween(this.node).by(.5,{y:-6}).call(t).start()},__decorate([a(cc.Node)],e.prototype,"unit",void 0),__decorate([a(cc.Sprite)],e.prototype,"unitImage",void 0),e=__decorate([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../ViewController":"ViewController"}],ViewController:[function(t,e,o){"use strict";cc._RF.push(e,"08ca2zVEwlIbYq4kX6PoXPw","ViewController"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./View"),i=t("../../Han/controller/ModelController"),r=t("./AudioController"),a=t("./ImagesAssets"),c=t("./Model"),s=cc._decorator,u=s.ccclass,p=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.view=null,e.model=null,e.modelController=null,e.audioController=null,e.imagesAssets=null,e}var o;return __extends(e,t),o=e,e.prototype.onLoad=function(){this.modelController.setConsumer(this),this.model.setModelController(this.modelController),o.instance=this},e.prototype.start=function(){var t=this;this.modelController.loadConfig(function(e){t.setData(e),t.notifyStartLobby(),t.view.openGamePage()})},e.prototype.notifyStartGame=function(){this.modelController.endLobby(),this.modelController.startGame()},e.prototype.notifyStartLobby=function(){this.modelController.startLobby()},e.prototype.setData=function(t){this._data=t},e.prototype.getData=function(){return this._data},e.prototype.getWeapon=function(t){return this.getData().weapon[t]},e.prototype.getRobot=function(t){return this.getData().robot[t]},e.prototype.getPilot=function(t){return this.getData().pilot[t]},e.prototype.playerTurnStart=function(t,e){this.view.playerTurnStart(t,e)},e.prototype.enemyTurnStart=function(t,e){this.view.enemyTurnStart(t,e)},e.prototype.unitMoveAnim=function(t,e){this.view.unitMoveAnim(t,e)},e.prototype.unitTargetingAnim=function(t,e){this.view.unitAimAnimation(t,e)},e.prototype.unitBattleAnim=function(t,e){this.view.unitBattleAnim(t,e)},e.prototype.unitDeadAnim=function(t,e){this.view.unitDeadAnim(t,e)},e.prototype.unitSkyAnim=function(t,e){this.view.unitSkyAnim(t,e)},e.prototype.unitGroundAnim=function(t,e){this.view.unitGroundAnim(t,e)},e.prototype.showMessage=function(t,e){this.view.showMessage(t,e)},e.prototype.paint=function(t,e){this.view.paint(t,e)},__decorate([p(n.default)],e.prototype,"view",void 0),__decorate([p(c.default)],e.prototype,"model",void 0),__decorate([p(i.default)],e.prototype,"modelController",void 0),__decorate([p(r.default)],e.prototype,"audioController",void 0),__decorate([p(a.default)],e.prototype,"imagesAssets",void 0),e=o=__decorate([u],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../Han/controller/ModelController":"ModelController","./AudioController":"AudioController","./ImagesAssets":"ImagesAssets","./Model":"Model","./View":"View"}],View:[function(t,e,o){"use strict";cc._RF.push(e,"79069vp9ShElYPnJ0j0GJiO","View"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./BasicViewer"),i=t("./CommentUI"),r=cc._decorator,a=r.ccclass,c=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pages=[],e.commentUI=null,e}return __extends(e,t),e.prototype.playerTurnStart=function(t,e){this.closeUnitMenu(),this.closeSystemMenu(),this.repaintPlayerStart(e)},e.prototype.enemyTurnStart=function(t,e){this.closeUnitMenu(),this.closeSystemMenu(),this.repaintEnemyTurnStart(t,e)},e.prototype.unitMoveAnim=function(t,e){this.performUnitMoveAnim(t.unit.key,t.path,e)},e.prototype.unitAimAnimation=function(t,e){this.getGamePage().showAimAnimation(t,e)},e.prototype.unitBattleAnim=function(t,e){this.getGamePage().closeFightInfo(),this.getGamePage().closeAccuracyInfos(),this.getGamePage().changeUnitHP(t,e)},e.prototype.unitDeadAnim=function(t,e){this.getGamePage().explodeUnit(t,e)},e.prototype.unitSkyAnim=function(t,e){this.getGamePage().units.toSkyUnit(t.unit.key,e)},e.prototype.unitGroundAnim=function(t,e){this.getGamePage().units.toLandUnit(t.unit.key,e)},e.prototype.showMessage=function(t,e){this.getCommentUI().showAlert(t.message,function(){}),e()},e.prototype.paint=function(t,e){this.repaintUnits(t.units),this.repaintMap(t.map),this.repaintCursor(t.cursor),this.repaintMoveRange(t.moveRange),this.repaintAttackRange(t.attackRange),this.repaintSystemMenu(t.systemMenu),this.repaintUnitMenu(t.cursor,t.unitMenu),this.repaintHitInfo(t.checkHitRate),this.repaintBattleMenu(t.battleMenu),this.repaintCellstate(t.cellState),this.repaintStartUnitsMenu(t.startUnitsMenu),e()},e.prototype.repaintStartUnitsMenu=function(t){this.getGamePage().closeRobotSelectPanel(),t&&this.getGamePage().openRobotSelectPanel(t)},e.prototype.repaintCellstate=function(t){this.getGamePage().closeUnitStatuMenu(),t&&this.getGamePage().openUnitStatuMenu(t)},e.prototype.repaintBattleMenu=function(t){t?this.getGamePage().showFightInfo(t):this.getGamePage().closeFightInfo()},e.prototype.repaintHitInfo=function(t){t?this.getGamePage().showAccuracyInfos(t):this.getGamePage().closeAccuracyInfos()},e.prototype.repaintUnitMenu=function(t,e){e?this.createOrUpdateUnitMenu(t,e.menuCursor.menu,e.data,e.menuCursor.cursor,e.menuCursor.subcursor):this.closeUnitMenu()},e.prototype.repaintSystemMenu=function(t){t?this.createOrUpdateSystemMenu(t.menuCursor.menu,t.data,t.menuCursor.cursor,t.menuCursor.subcursor):this.closeSystemMenu()},e.prototype.repaintMoveRange=function(t){null!=t&&this.getGamePage().map.showMovableGrid(t)},e.prototype.repaintAttackRange=function(t){null!=t&&this.getGamePage().map.showWeaponRange(t)},e.prototype.repaintMapAttackRange=function(t,e){null!=t&&(this.getGamePage().map.showWeaponRange(t),e())},e.prototype.repaintCursor=function(t){this.getGamePage().setCursor(t)},e.prototype.repaintMap=function(t){this.getGamePage().map.setMap(t),this.getGamePage().setSmallMap(t)},e.prototype.repaintUnits=function(t){null!=t&&(this.getGamePage().units.setUnits(t),this.getGamePage().showUnitSampleInfos(t))},e.prototype.repaintPlayerStart=function(t){this.getGamePage().openTurnStart(!0,t)},e.prototype.repaintEnemyTurnStart=function(t,e){this.getGamePage().openTurnStart(!1,e)},e.prototype.closeUnitMenu=function(){this.getGamePage().closeUnitMenu()},e.prototype.closeSystemMenu=function(){this.getGamePage().closeSceneMenu()},e.prototype.createOrUpdateUnitMenu=function(t,e,o,n,i){this.getGamePage().openUnitMenu(t,[e,o],[n,i])},e.prototype.createOrUpdateSystemMenu=function(t,e,o,n){this.getGamePage().openSceneMenu(t,[o,n])},e.prototype.performUnitMoveAnim=function(t,e,o){this.getGamePage().units.moveUnitByID(t,e,o)},e.prototype.closeAllPages=function(){this.pages.forEach(function(t){t.close()})},e.prototype.openMainPage=function(){return this.closeAllPages(),this.pages[0].open(),this.getMainPage()},e.prototype.openGamePage=function(){return this.closeAllPages(),this.openLoadingPage(),this.node.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){this.pages[1].open(),this.closeLoadingPage()},this))),this.getGamePage()},e.prototype.openLoadingPage=function(){this.pages[2].open()},e.prototype.closeLoadingPage=function(){this.pages[2].close()},e.prototype.getCommentUI=function(){return this.commentUI},e.prototype.getGamePage=function(){return this.pages[1]},e.prototype.getMainPage=function(){return this.pages[0]},e.prototype.getGridPos=function(t){return[32*t[0]-304,32*-t[1]+304]},e.prototype.getXYByIndex=function(t){cc.log(t);var e=[t%20,Math.floor(t/20)];return cc.log(t%20,Math.floor(t/20)),e},__decorate([c(n.default)],e.prototype,"pages",void 0),__decorate([c(i.default)],e.prototype,"commentUI",void 0),e=__decorate([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./BasicViewer":"BasicViewer","./CommentUI":"CommentUI"}],WeaponMenuItem:[function(t,e,o){"use strict";cc._RF.push(e,"78e596Se5JO87P3Wv3kptri","WeaponMenuItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.weaponName=null,e.weaponType=null,e.weaponPower=null,e.weaponRange=null,e.weaponHit=null,e.weaponEN=null,e.weaponBullet=null,e.backColor=null,e}return __extends(e,t),__decorate([r(cc.Label)],e.prototype,"weaponName",void 0),__decorate([r(cc.Label)],e.prototype,"weaponType",void 0),__decorate([r(cc.Label)],e.prototype,"weaponPower",void 0),__decorate([r(cc.Label)],e.prototype,"weaponRange",void 0),__decorate([r(cc.Label)],e.prototype,"weaponHit",void 0),__decorate([r(cc.Label)],e.prototype,"weaponEN",void 0),__decorate([r(cc.Label)],e.prototype,"weaponBullet",void 0),__decorate([r(cc.Sprite)],e.prototype,"backColor",void 0),e=__decorate([i],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],WeaponMenu:[function(t,e,o){"use strict";cc._RF.push(e,"940ddYUfctKpK4kSU5GrKrf","WeaponMenu"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../MenuCursor"),i=t("../BasicViewer"),r=t("./WeaponMenuItem"),a=cc._decorator,c=a.ccclass,s=a.property,u=a.requireComponent,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.weaponItems=[],e}return __extends(e,t),e.prototype.showCurrentWeapon=function(t){this.weaponItems.forEach(function(t){t.backColor.node.color=cc.Color.WHITE}),this.weaponItems[t].backColor.node.color=cc.Color.YELLOW},e.prototype.setWeapons=function(t){for(var e=0;e<this.weaponItems.length;++e)if(e<t.length){this.weaponItems[e].node.active=!0;var o=t[e],n=this.weaponItems[e];n.weaponName.string=o.title,n.weaponPower.string=o.damage,n.weaponHit.string=(100*o.accuracy).toFixed(0)+"%",n.weaponRange.string=o.range[0]+"~"+o.range[1],n.weaponType.string=o.type,n.weaponBullet.string="\u5f48 "+o.bulletCount+"/"+o.maxBulletCount,n.weaponEN.string="EN "+o.energyCost}else this.weaponItems[e].node.active=!1;this.showCurrentWeapon(0)},__decorate([s(r.default)],e.prototype,"weaponItems",void 0),e=__decorate([c,u(n.default)],e)}(i.default);o.default=p,cc._RF.pop()},{"../BasicViewer":"BasicViewer","../MenuCursor":"MenuCursor","./WeaponMenuItem":"WeaponMenuItem"}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e,o){"use strict";cc._RF.push(e,"fac5fGs1ZRL3KgPqTxYP+k/","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["ModelController","AnimationEndCallback","AnimationLoop","AudioController","BasicViewer","CommentUI","DefaultState","AccuracyInfo","EffectLayer","Effects","FightInfo","FightMenu","Grid","LandMap","LandUnits","RobotSelectListItem","RobotSelectPanel","SmallMap","TextEffect","TurnStart","UVReset","Unit","UnitSampleInfo","UnitStatuMenu","WeaponMenu","WeaponMenuItem","IState","ImagesAssets","InputSensor","MainPageDefaultState","PilotStoreBuyState","PilotStoreState","PilotListItem","PilotStore","RobotStoreBuyState","RobotStoreState","RobotListItem","RobotStore","RobotDetail","StandBy","StandyByRobotDetailState","StandyByRobotPilotPopState","StandyByRobotPilotState","StandyByState","MenuButton","MenuButtons","MenuCursor","Model","GamePage","MainPage","Pool","PopPanel","ShowItem","StateController","View","ViewController","use_v2.1-2.2.1_cc.Toggle_event"]);